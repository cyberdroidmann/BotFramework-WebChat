(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1092:function(t,e){},1093:function(t,e){},1094:function(t,e){},1214:function(t,e){},1224:function(t,e){},1225:function(t,e){},1226:function(t,e){},1241:function(t,e){},1249:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),s=n(97),a=n.n(s),o=(n(437),n(73)),c=n(74),u=n(138),h=n(137),f=n(139),d=n(98),l=n.n(d),p=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Object(o.a)(this,t),this._state=[],this._index=-1,this._storageKey="WEBCHAT_SEND_HISTORY",this._persist=e,this._persist){try{this._state=JSON.parse(window.sessionStorage.getItem(this._storageKey))||[]}catch(n){this._state=[]}this.add=this._persistAfter(this.add),this.truncate=this._persistAfter(this.truncate)}}return Object(c.a)(t,[{key:"isActive",value:function(){return this._state.length>0&&this._index>-1}},{key:"add",value:function(t){var e=this._state.indexOf(t);-1!==e&&this._state.splice(e,1),this._state.unshift(t),this._state.length>25&&this.truncate()}},{key:"getNext",value:function(){var t=this._state[this._index+1];if(t)return this._index++,t}},{key:"getPrevious",value:function(){var t=this._state[this._index-1];return t?(this._index--,t):(this.reset(),"")}},{key:"reset",value:function(){this._index=-1}},{key:"truncate",value:function(){this._state.pop()}},{key:"_persistAfter",value:function(t){var e=this;return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.call.apply(t,[e].concat(i)),e._persist&&window.sessionStorage.setItem(e._storageKey,JSON.stringify(e._state))}}}]),t}(),y=n(58),_=n.n(y),v=n(431),b=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(h.a)(e).call(this,t))).state={directLine:null},n}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.fetchToken()}},{key:"fetchToken",value:function(){var t=Object(v.a)(_.a.mark(function t(){var e,n,i;return _.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://webchat-mockbot.azurewebsites.net/directline/token",{method:"POST"});case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,i=n.token,this.setState(function(){return{directLine:Object(d.createDirectLine)({token:i})}});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.directLine?r.a.createElement(l.a,Object.assign({className:"chat",directLine:this.state.directLine},this.props)):r.a.createElement("div",null,"Connecting to bot\u2026")}}]),e}(r.a.Component),w=function(t){function e(){var t,n;Object(o.a)(this,e);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(n=Object(u.a)(this,(t=Object(h.a)(e)).call.apply(t,[this].concat(r)))).history=new p,n.state={isDirty:!1},n.store=Object(d.createStore)({},function(){return function(t){return function(e){return"WEB_CHAT/SEND_MESSAGE"===e.type?n.history.add(e.payload.text):e.fromHistory||"WEB_CHAT/SET_SEND_BOX"!==e.type||(n.setState({isDirty:""!==e.payload.text}),n.history.reset()),t(e)}}}),n.handleKeyDown=function(t){var e=t.target;if(!n.state.isDirty&&"webchat-sendbox-input"===e.dataset.id){var i;switch(t.key){case"ArrowUp":i=n.history.getNext();break;case"ArrowDown":i=n.history.getPrevious();break;default:return}"string"===typeof i&&n.store.dispatch({type:"WEB_CHAT/SET_SEND_BOX",fromHistory:!0,payload:{text:i}})}},n}return Object(f.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"app",onKeyDown:this.handleKeyDown},r.a.createElement(b,{store:this.store}))}}]),e}(r.a.Component);a.a.render(r.a.createElement(w,null),document.getElementById("root"))},432:function(t,e,n){t.exports=n(1249)},437:function(t,e,n){},549:function(t,e){},551:function(t,e){},588:function(t,e){},589:function(t,e){}},[[432,1,2]]]);
//# sourceMappingURL=main.fc39a77a.chunk.js.map